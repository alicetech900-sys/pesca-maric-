<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secretaria de Pesca - Protótipo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
        }
        .app-container {
            max-width: 400px;
            height: 800px;
            margin: 2rem auto;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-radius: 20px;
            background-color: #fff;
            position: relative;
            display: flex;
            flex-direction: column;
        }
        .main-content {
            padding: 1rem;
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            padding-bottom: 5rem; /* Espaço para o menu inferior */
        }
        .screen {
            display: none;
        }
        .screen.active {
            display: block;
        }
        .sidebar {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: -100%;
            background-color: #fff;
            box-shadow: 4px 0 10px rgba(0,0,0,0.1);
            transition: left 0.3s ease-in-out;
            z-index: 50;
            display: flex;
            flex-direction: column;
        }
        .sidebar.active {
            left: 0;
        }
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 40;
        }
        .overlay.active {
            display: block;
        }
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 400px;
            background-color: #fff;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-around;
            padding: 0.5rem 0;
            box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.05);
            z-index: 50;
        }
        .nav-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
            border-radius: 9999px; /* rounded-full */
            color: #6b7280; /* text-gray-500 */
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            text-decoration: none;
        }
        .nav-button .icon {
            font-size: 1.25rem; /* text-xl */
            margin-bottom: 0.25rem;
        }
        .nav-button .label {
            font-size: 0.75rem; /* text-xs */
            line-height: 1rem;
        }
        .nav-button.active {
            color: #1d4ed8; /* text-blue-700 */
        }
        .loading-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            padding: 2rem;
            color: #4a5568;
        }
        .instagram-post {
            background-color: #fff;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 1rem;
        }
        .instagram-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        .news-card {
            display: flex;
            gap: 1rem;
            background-color: #fff;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 1rem;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .news-card:hover {
            transform: translateY(-2px);
        }
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            background-color: #f7fafc;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
        }
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .chat-input-container {
            display: flex;
            padding: 1rem;
            border-top: 1px solid #e2e8f0;
            background-color: #fff;
        }
        .chat-input {
            flex: 1;
            border-radius: 9999px;
            padding: 0.5rem 1rem;
            border: 1px solid #cbd5e0;
        }
        .chat-send-btn {
            background-color: #3b82f6;
            color: white;
            border-radius: 9999px;
            padding: 0.5rem 1rem;
            margin-left: 0.5rem;
            font-weight: bold;
        }
        .message {
            max-width: 80%;
            padding: 0.75rem;
            border-radius: 1rem;
        }
        .user-message {
            align-self: flex-end;
            background-color: #e2e8f0;
            color: #1a202c;
        }
        .ia-message {
            align-self: flex-start;
            background-color: #3b82f6;
            color: #fff;
        }
        .ia-loading-message {
            align-self: flex-start;
            color: #6b7280;
            font-style: italic;
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s, opacity 0.3s;
        }
        .modal.active {
            visibility: visible;
            opacity: 1;
        }
        .modal-content {
            background-color: #fff;
            padding: 1.5rem;
            border-radius: 1rem;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            position: relative;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

<div class="app-container">
    
    <!-- Overlay para fechar o menu lateral e modais -->
    <div id="overlay" class="overlay"></div>

    <!-- Menu Lateral (Sidebar) -->
    <div id="sidebar" class="sidebar p-4">
        <!-- Cabeçalho do menu lateral com a logo -->
        <div class="p-4 mb-8 text-center flex flex-col items-center gap-4">
            <img src="https://i.pinimg.com/736x/54/07/e2/5407e20320857e626a0c0b104529f87c.jpg" alt="Logo da Secretaria de Pesca de Maricá" class="w-24 h-24 object-cover rounded-full border-2 border-gray-200">
            <h2 class="text-xl font-bold">Secretaria de Pesca de Maricá</h2>
        </div>

        <!-- Botão para fechar o menu -->
        <button id="close-sidebar-btn" class="absolute top-4 right-4 text-gray-700 text-xl p-2 rounded-full hover:bg-gray-200 transition-colors">
            <i class="fa-solid fa-times"></i>
        </button>

        <!-- Itens de navegação do menu lateral -->
        <nav class="flex flex-col gap-2 flex-grow">
            <button class="nav-item flex items-center gap-4 p-4 rounded-xl font-medium text-lg hover:bg-gray-100 transition-colors" data-target="home">
                <i class="fa-solid fa-house w-6 text-center"></i>
                <span>Início</span>
            </button>
            <button class="nav-item flex items-center gap-4 p-4 rounded-xl font-medium text-lg hover:bg-gray-100 transition-colors" data-target="tide-table">
                <i class="fa-solid fa-water w-6 text-center"></i>
                <span>Tábua de Maré</span>
            </button>
            <button class="nav-item flex items-center gap-4 p-4 rounded-xl font-medium text-lg hover:bg-gray-100 transition-colors" data-target="events">
                <i class="fa-solid fa-calendar-alt w-6 text-center"></i>
                <span>Eventos e Competições</span>
            </button>
            <button class="nav-item flex items-center gap-4 p-4 rounded-xl font-medium text-lg hover:bg-gray-100 transition-colors" data-target="fishing-news">
                <i class="fa-solid fa-newspaper w-6 text-center"></i>
                <span>Notícias da Pesca</span>
            </button>
            <button class="nav-item flex items-center gap-4 p-4 rounded-xl font-medium text-lg hover:bg-gray-100 transition-colors" data-target="fishing-info">
                <i class="fa-solid fa-fish w-6 text-center"></i>
                <span>Informações da Pesca</span>
            </button>
            <button class="nav-item flex items-center gap-4 p-4 rounded-xl font-medium text-lg hover:bg-gray-100 transition-colors" data-target="ia-chat">
                <i class="fa-solid fa-robot w-6 text-center"></i>
                <span>IA da Pesca</span>
            </button>
        </nav>
    </div>

    <!-- Conteúdo Principal do Aplicativo -->
    <main class="flex flex-col flex-1 relative">
        <!-- Cabeçalho fixo no topo -->
        <header class="p-4 flex items-center justify-between shadow-sm bg-white z-10 sticky top-0">
            <button id="open-sidebar-btn" class="text-blue-600 text-xl p-2 rounded-full hover:bg-gray-100 transition-colors">
                <i class="fa-solid fa-bars"></i>
            </button>
            <div class="flex items-center gap-2 absolute left-1/2 -translate-x-1/2">
                <img src="https://i.pinimg.com/736x/54/07/e2/5407e20320857e626a0c0b104529f87c.jpg" alt="Logo da Secretaria de Pesca de Maricá" class="h-10 w-10 object-cover rounded-full">
                <span class="text-lg font-bold text-gray-800 hidden md:block">Secretaria de Pesca de Maricá</span>
            </div>
            <div class="w-8"></div> <!-- Espaçamento para centralizar o título -->
        </header>

        <!-- Container principal de conteúdo com scroll -->
        <div class="main-content">
            
            <!-- Tela: Início com publicações do Instagram -->
            <section id="home" class="screen">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">Início</h2>
                <h3 class="text-lg font-medium text-gray-600 mb-4">Últimas Publicações do Instagram</h3>
                <div id="instagram-feed" class="flex flex-col gap-4">
                    <div class="elfsight-app-319fa19a-dd36-4a5f-8cff-1dc6f3c6d518" data-elfsight-app-lazy></div>
                </div>
            </section>
            
            <!-- Tela: Tábua de Maré -->
            <section id="tide-table" class="screen">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">Tábua de Maré</h2>
                <!-- Conteúdo da tábua de maré será inserido aqui via JavaScript -->
                <div id="tide-content" class="flex flex-col gap-4">
                    <!-- Placeholder de carregamento -->
                    <div class="loading-indicator">
                        <i class="fa-solid fa-water fa-spin-pulse fa-2x"></i>
                        <p>Carregando tábua de maré...</p>
                    </div>
                </div>
            </section>

            <!-- Tela: Notícias da Pesca -->
            <section id="fishing-news" class="screen">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">Notícias da Pesca</h2>
                <div id="news-list" class="flex flex-col gap-4">
                    <!-- As notícias serão inseridas aqui via JavaScript -->
                    <div class="loading-indicator">
                        <i class="fa-solid fa-newspaper fa-spin-pulse fa-2x"></i>
                        <p>Carregando notícias...</p>
                    </div>
                </div>
            </section>

            <!-- Tela: Eventos e Competições -->
            <section id="events" class="screen active">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">Eventos e Competições</h2>
                <div id="events-list" class="flex flex-col gap-4">
                    <!-- Eventos serão renderizados aqui -->
                    <!-- Placeholder de carregamento -->
                    <div class="loading-indicator">
                        <i class="fa-solid fa-calendar-alt fa-spin-pulse fa-2x"></i>
                        <p>Carregando eventos...</p>
                    </div>
                </div>
            </section>
            
            <!-- Tela: Informações da Pesca -->
            <section id="fishing-info" class="screen">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">Informações da Pesca</h2>
                <div class="bg-white p-6 rounded-xl shadow-md flex flex-col gap-6">
                    <div>
                        <h3 class="text-lg font-semibold mb-2">Peixes Mais Comuns</h3>
                        <div class="flex items-center justify-around bg-gray-50 p-4 rounded-lg">
                            <i class="fa-solid fa-fish text-blue-500 text-2xl"></i>
                            <i class="fa-solid fa-shrimp text-blue-500 text-2xl"></i>
                            <i class="fa-solid fa-squid text-blue-500 text-2xl"></i>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-2">Períodos de Defeso</h3>
                        <div class="flex items-center gap-4 bg-gray-50 p-4 rounded-lg">
                            <i class="fa-solid fa-calendar-days text-red-500 text-2xl"></i>
                            <span class="font-medium">01 Dez - 28 Fev</span>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-2">Dicas e Boas Práticas</h3>
                        <ul class="flex flex-col gap-2">
                            <li class="flex items-center gap-3 bg-gray-50 p-3 rounded-lg">
                                <i class="fa-solid fa-carrot text-orange-500"></i>
                                <span class="font-medium">Iscas Recomendadas</span>
                            </li>
                            <li class="flex items-center gap-3 bg-gray-50 p-3 rounded-lg">
                                <i class="fa-solid fa-heart text-green-500"></i>
                                <span class="font-medium">Práticas Sustentáveis</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <!-- Tela: IA da Pesca -->
            <section id="ia-chat" class="screen">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">IA da Pesca</h2>
                <div class="chat-container">
                    <div id="chat-messages" class="chat-messages">
                        <div class="message ia-message">
                            Olá! Eu sou a IA da Pesca. Pergunte-me qualquer coisa sobre pesca, regulamentação ou dicas.
                        </div>
                    </div>
                    <div class="chat-input-container">
                        <input type="text" id="chat-input" class="chat-input" placeholder="Digite sua pergunta...">
                        <button id="chat-send-btn" class="chat-send-btn">
                            <i class="fa-solid fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Modal para detalhes do evento -->
    <div id="event-modal" class="modal">
        <div class="modal-content">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-700 text-2xl p-2 rounded-full hover:bg-gray-200 transition-colors">
                <i class="fa-solid fa-times"></i>
            </button>
            <img id="modal-event-img" src="" alt="Imagem do Evento" class="w-full h-48 object-cover rounded-lg mb-4">
            <h3 id="modal-event-title" class="font-bold text-2xl mb-2"></h3>
            <p id="modal-event-date" class="text-sm text-gray-500"></p>
            <p id="modal-event-time" class="text-sm text-gray-500"></p>
            <p id="modal-event-location" class="text-sm text-gray-500 mb-4"></p>
            <p id="modal-event-description" class="text-gray-700 text-base"></p>
        </div>
    </div>

    <!-- Menu de Navegação Inferior -->
    <nav class="bottom-nav">
        <a class="nav-button" href="#" data-target="home">
            <i class="icon fa-solid fa-house"></i>
            <span class="label">Início</span>
        </a>
        <a class="nav-button" href="#" data-target="tide-table">
            <i class="icon fa-solid fa-water"></i>
            <span class="label">Maré</span>
        </a>
        <a class="nav-button" href="#" data-target="events">
            <i class="icon fa-solid fa-calendar-alt"></i>
            <span class="label">Eventos</span>
        </a>
        <a class="nav-button active" href="#" data-target="fishing-news">
            <i class="icon fa-solid fa-newspaper"></i>
            <span class="label">Notícias</span>
        </a>
        <a class="nav-button" href="#" data-target="fishing-info">
            <i class="icon fa-solid fa-fish"></i>
            <span class="label">Pesca</span>
        </a>
        <a class="nav-button" href="#" data-target="ia-chat">
            <i class="icon fa-solid fa-robot"></i>
            <span class="label">IA</span>
        </a>
    </nav>
</div>

<script src="https://static.elfsight.com/platform/platform.js" async></script>
<script>
    // Referências aos elementos HTML
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const openSidebarBtn = document.getElementById('open-sidebar-btn');
    const closeSidebarBtn = document.getElementById('close-sidebar-btn');
    const sidebarNavItems = document.querySelectorAll('.nav-item');
    const bottomNavButtons = document.querySelectorAll('.bottom-nav .nav-button');
    const screens = document.querySelectorAll('.screen');
    const instagramFeed = document.getElementById('instagram-feed');
    const tideContent = document.getElementById('tide-content');
    const newsList = document.getElementById('news-list');
    const eventsList = document.getElementById('events-list');
    const iaChatInput = document.getElementById('chat-input');
    const iaChatSendBtn = document.getElementById('chat-send-btn');
    const iaChatMessages = document.getElementById('chat-messages');

    // Modal elements
    const eventModal = document.getElementById('event-modal');
    const closeModalBtn = document.getElementById('close-modal-btn');
    const modalEventImg = document.getElementById('modal-event-img');
    const modalEventTitle = document.getElementById('modal-event-title');
    const modalEventDate = document.getElementById('modal-event-date');
    const modalEventTime = document.getElementById('modal-event-time');
    const modalEventLocation = document.getElementById('modal-event-location');
    const modalEventDescription = document.getElementById('modal-event-description');
    
    // Dados simulados da tábua de maré para os próximos dias
    const tideData = {
        city: "Maricá, RJ",
        days: [
            {
                date: "Hoje",
                tides: [
                    { type: "Alta", time: "04:10", height: 1.2 },
                    { type: "Baixa", time: "09:30", height: 0.4 },
                    { type: "Alta", time: "16:20", height: 1.5 },
                    { type: "Baixa", time: "22:05", height: 0.3 }
                ],
                chartData: [0.8, 1.2, 1.0, 0.6, 0.4, 0.7, 1.1, 1.5, 1.2, 0.8, 0.3, 0.5, 0.9]
            },
            {
                date: "Amanhã",
                tides: [
                    { type: "Alta", time: "05:00", height: 1.3 },
                    { type: "Baixa", time: "10:15", height: 0.5 },
                    { type: "Alta", time: "17:00", height: 1.6 },
                    { type: "Baixa", time: "23:00", height: 0.4 }
                ],
                chartData: [0.9, 1.3, 1.1, 0.7, 0.5, 0.8, 1.2, 1.6, 1.3, 0.9, 0.4, 0.6, 1.0]
            },
            {
                date: "Terça",
                tides: [
                    { type: "Alta", time: "05:45", height: 1.4 },
                    { type: "Baixa", time: "11:00", height: 0.6 },
                    { type: "Alta", time: "17:45", height: 1.7 },
                    { type: "Baixa", time: "23:50", height: 0.5 }
                ],
                chartData: [1.0, 1.4, 1.2, 0.8, 0.6, 0.9, 1.3, 1.7, 1.4, 1.0, 0.5, 0.7, 1.1]
            },
            {
                date: "Quarta",
                tides: [
                    { type: "Alta", time: "06:30", height: 1.5 },
                    { type: "Baixa", time: "11:45", height: 0.7 },
                    { type: "Alta", time: "18:30", height: 1.8 }
                ],
                chartData: [1.1, 1.5, 1.3, 0.9, 0.7, 1.0, 1.4, 1.8, 1.5, 1.1, 0.6, 0.8, 1.2]
            }
        ]
    };

    const fishingNews = [
        {
            title: "Tainha: Saiba onde e como pescar na Costa do Sol",
            snippet: "Com a temporada de tainha a todo vapor, pescadores dão dicas para a melhor pesca na região de Maricá.",
            imageUrl: "https://placehold.co/80x80/a0c4ff/000?text=Noticia+1",
            url: "https://example.com/noticia-1"
        },
        {
            title: "Guia de pesca sustentável em Maricá",
            snippet: "A Secretaria de Pesca lança um guia completo com boas práticas para a preservação da vida marinha.",
            imageUrl: "https://placehold.co/80x80/c4a0ff/000?text=Noticia+2",
            url: "https://example.com/noticia-2"
        },
        {
            title: "Conheça os peixes mais comuns na região de Maricá",
            snippet: "Um artigo detalhado sobre as espécies que habitam a costa maricaense e seus períodos de defeso.",
            imageUrl: "https://placehold.co/80x80/a0ffc4/000?text=Noticia+3",
            url: "https://example.com/noticia-3"
        }
    ];

    const eventsData = [
        {
            title: "4° Etapa do Circuito de Pesca Artesanal com Tarrafa",
            date: "DOMINGO, 24 AGO 2025",
            time: "07:00",
            location: "Ponte Preta, Ao lado da ponte principal",
            imageUrl: "https://i.pinimg.com/736x/6a/4d/70/6a4d70087be2266f18c85eada1dda642.jpg",
            description: "Participe do nosso grande campeonato de tarrafa! Venha competir com pescadores artesanais de toda a região e mostrar suas habilidades. Prêmios, sorteios, shows ao vivo e muito mais!"
        }
    ];

    let currentDayIndex = 0; // Começa com "Hoje"
    
    // Chave de API do Hugging Face para o chatbot
    const hfApiKey = "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";
    const hfApiUrl = "https://kenxitou-pesca-marica-chat.hf.space/run/predict";

    // Inclusão do script do Elfsight para o feed do Instagram
    const elfsightScript = document.createElement('script');
    elfsightScript.src = 'https://static.elfsight.com/platform/platform.js';
    elfsightScript.async = true;
    document.head.appendChild(elfsightScript);

    // Função para renderizar o feed do Instagram
    function renderInstagramFeed() {
        // O widget do Elfsight fará o carregamento dos dados de forma assíncrona.
    }
    
    // Função para renderizar o gráfico de marés
    function renderTideChart(data) {
        const ctx = document.getElementById('tideChart').getContext('2d');
        const labels = ['0h', '2h', '4h', '6h', '8h', '10h', '12h', '14h', '16h', '18h', '20h', '22h', '24h'];
        
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Altura da Maré (m)',
                    data: data,
                    borderColor: 'rgb(59, 130, 246)',
                    backgroundColor: 'rgba(59, 130, 246, 0.2)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Altura (m)'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });
    }

    // Função para buscar e exibir a tábua de maré (simulada)
    async function fetchTideData(dayIndex) {
        tideContent.innerHTML = `
            <div class="loading-indicator">
                <i class="fa-solid fa-water fa-spin-pulse fa-2x"></i>
                <p>Carregando tábua de maré...</p>
            </div>
        `;
        
        await new Promise(resolve => setTimeout(resolve, 1500));

        const currentDayData = tideData.days[dayIndex];
        
        tideContent.innerHTML = `
            <div class="bg-white p-4 rounded-xl shadow-md">
                <div class="flex items-center justify-between">
                    <span class="text-lg font-bold">${currentDayData.date}</span>
                    <span class="text-sm text-gray-500">${tideData.city}</span>
                </div>
                <div class="relative h-64 mt-4">
                    <canvas id="tideChart"></canvas>
                </div>
                <div class="flex justify-around mt-6">
                    ${currentDayData.tides.map(tide => `
                        <div class="flex flex-col items-center text-center">
                            <span class="text-sm font-semibold text-gray-700">Maré ${tide.type}</span>
                            <span class="text-xl font-bold text-blue-800">${tide.time}</span>
                            <span class="text-sm text-gray-500">${tide.height}m</span>
                        </div>
                    `).join('')}
                </div>
            </div>
            <div class="flex justify-between mt-4">
                <button id="prev-day" class="p-2 rounded-full bg-gray-200 text-gray-700 disabled:opacity-50">
                    <i class="fa-solid fa-chevron-left"></i>
                </button>
                <button id="today-btn" class="p-2 px-4 rounded-full bg-blue-600 text-white disabled:opacity-50">
                    Hoje
                </button>
                <button id="next-day" class="p-2 rounded-full bg-gray-200 text-gray-700 disabled:opacity-50">
                    <i class="fa-solid fa-chevron-right"></i>
                </button>
            </div>
        `;
        
        const prevButton = document.getElementById('prev-day');
        const nextButton = document.getElementById('next-day');
        const todayButton = document.getElementById('today-btn');

        if (dayIndex === 0) prevButton.disabled = true;
        if (dayIndex === tideData.days.length - 1) nextButton.disabled = true;

        prevButton.addEventListener('click', () => {
            currentDayIndex--;
            fetchTideData(currentDayIndex);
        });

        nextButton.addEventListener('click', () => {
            currentDayIndex++;
            fetchTideData(currentDayIndex);
        });

        todayButton.addEventListener('click', () => {
            currentDayIndex = 0;
            fetchTideData(currentDayIndex);
        });

        renderTideChart(currentDayData.chartData);
    }
    
    // Função para renderizar as notícias de pesca
    async function renderFishingNews() {
        newsList.innerHTML = `
            <div class="loading-indicator">
                <i class="fa-solid fa-newspaper fa-spin-pulse fa-2x"></i>
                <p>Carregando notícias...</p>
            </div>
        `;
        
        await new Promise(resolve => setTimeout(resolve, 1500));

        newsList.innerHTML = '';
        fishingNews.forEach(item => {
            const newsCard = `
                <a href="${item.url}" target="_blank" class="news-card">
                    <img src="${item.imageUrl}" alt="Imagem da notícia" class="w-20 h-20 object-cover rounded-lg flex-shrink-0">
                    <div class="flex flex-col">
                        <h4 class="font-semibold text-lg text-gray-800">${item.title}</h4>
                        <p class="text-sm text-gray-600 mt-1">${item.snippet}</p>
                    </div>
                </a>
            `;
            newsList.innerHTML += newsCard;
        });
    }

    // Função para renderizar a lista de eventos
    async function renderEvents() {
        eventsList.innerHTML = `
            <div class="loading-indicator">
                <i class="fa-solid fa-calendar-alt fa-spin-pulse fa-2x"></i>
                <p>Carregando eventos...</p>
            </div>
        `;
        
        await new Promise(resolve => setTimeout(resolve, 1500));

        eventsList.innerHTML = '';
        eventsData.forEach((event, index) => {
            const eventCard = `
                <div class="bg-white p-4 rounded-xl shadow-md flex items-center gap-4 cursor-pointer event-card" data-index="${index}">
                    <img src="${event.imageUrl}" alt="Imagem do Evento" class="w-20 h-20 object-cover rounded-lg">
                    <div class="flex-1">
                        <h3 class="font-semibold text-lg">${event.title}</h3>
                        <p class="text-sm text-gray-500 mt-1">${event.date}</p>
                        <p class="text-sm text-gray-500">${event.time} - ${event.location}</p>
                    </div>
                    <i class="fa-solid fa-chevron-right text-gray-400"></i>
                </div>
            `;
            eventsList.innerHTML += eventCard;
        });
        
        document.querySelectorAll('.event-card').forEach(card => {
            card.addEventListener('click', (e) => {
                const index = e.currentTarget.dataset.index;
                showEventModal(eventsData[index]);
            });
        });
    }
    
    function showEventModal(event) {
        modalEventImg.src = event.imageUrl;
        modalEventTitle.textContent = event.title;
        modalEventDate.textContent = event.date;
        modalEventTime.textContent = event.time;
        modalEventLocation.textContent = event.location;
        modalEventDescription.textContent = event.description;
        eventModal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function hideEventModal() {
        eventModal.classList.remove('active');
        document.body.style.overflow = 'auto';
    }

    closeModalBtn.addEventListener('click', hideEventModal);
    eventModal.addEventListener('click', (e) => {
        if (e.target === eventModal) {
            hideEventModal();
        }
    });

    // Funções para o chatbot
    function addMessage(text, sender) {
        const messageDiv = document.createElement('div');
        messageDiv.classList.add('message', sender === 'ia' ? 'ia-message' : 'user-message');
        messageDiv.textContent = text;
        iaChatMessages.appendChild(messageDiv);
        iaChatMessages.scrollTop = iaChatMessages.scrollHeight;
    }

    async function handleChatInput() {
        const text = iaChatInput.value.trim();
        if (text) {
            addMessage(text, 'user');
            iaChatInput.value = '';
            
            const typingIndicator = document.createElement('div');
            typingIndicator.classList.add('ia-loading-message');
            typingIndicator.textContent = 'A IA está respondendo...';
            iaChatMessages.appendChild(typingIndicator);
            iaChatMessages.scrollTop = iaChatMessages.scrollHeight;

            try {
                // Simulação da chamada de API para o Hugging Face
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                iaChatMessages.removeChild(typingIndicator);
                const iaResponse = "Olá! Sua pergunta foi recebida. Como uma IA da Pesca, posso te dar informações sobre regulamentação, dicas de equipamentos e espécies de peixes. Qual é a sua pergunta?";
                addMessage(iaResponse, 'ia');
            } catch (error) {
                console.error("Erro ao comunicar com a IA:", error);
                iaChatMessages.removeChild(typingIndicator);
                addMessage("Desculpe, não consegui me conectar. Tente novamente mais tarde.", 'ia');
            }
        }
    }

    iaChatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            e.preventDefault();
            handleChatInput();
        }
    });

    iaChatSendBtn.addEventListener('click', handleChatInput);

    // Função para abrir o menu lateral
    function openSidebar() {
        sidebar.classList.add('active');
        overlay.classList.add('active');
    }

    // Função para fechar o menu lateral
    function closeSidebar() {
        sidebar.classList.remove('active');
        overlay.classList.remove('active');
    }

    // Função para mudar a tela exibida e atualizar o estado ativo dos botões
    function changeScreen(targetId) {
        screens.forEach(screen => {
            screen.classList.remove('active');
        });
        document.getElementById(targetId).classList.add('active');

        if (targetId === 'home') {
            renderInstagramFeed();
        }
        if (targetId === 'fishing-news') {
            renderFishingNews();
        }
        if (targetId === 'tide-table') {
            currentDayIndex = 0;
            fetchTideData(currentDayIndex);
        }
        if (targetId === 'events') {
            renderEvents();
        }

        sidebarNavItems.forEach(item => {
            if (item.dataset.target === targetId) {
                item.classList.add('bg-red-100', 'text-red-600');
            } else {
                item.classList.remove('bg-red-100', 'text-red-600');
            }
        });
        bottomNavButtons.forEach(item => {
            if (item.dataset.target === targetId) {
                item.classList.add('active');
            } else {
                item.classList.remove('active');
            }
        });
    }

    openSidebarBtn.addEventListener('click', openSidebar);
    closeSidebarBtn.addEventListener('click', closeSidebar);
    overlay.addEventListener('click', closeSidebar);

    sidebarNavItems.forEach(item => {
        item.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = item.dataset.target;
            changeScreen(targetId);
            closeSidebar();
        });
    });

    bottomNavButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = button.dataset.target;
            changeScreen(targetId);
        });
    });

    window.onload = function() {
      changeScreen('home');
    };
</script>

</body>
</html>
